# Cheersin 專家檢查清單（可重跑）

每次大改版或上線前可依此清單逐項勾選。格式：Yes / No / NA（不適用）。

---

## CEO（收入與商業）

| # | 檢查項 | Y/N/NA |
|---|--------|--------|
| 1 | 訂閱付費流程（建立→Webhook→profiles 更新）端到端可驗證？ | |
| 2 | 定價頁 CTA、方案對比、社會認證（如「已有 X 人升級」）已上線？ | |
| 3 | 至少一個轉換或留存指標可被追蹤（如付費轉換率、DAU/MAU）？ | |
| 4 | 免費與付費功能邊界明確（如劇本殺 1 劇本限制、遊戲大廳皇冠）？ | |
| 5 | B2B／企業方案已定義或明確標註「尚未開放」？ | |
| 6 | 隱私政策與服務條款可從首頁/註冊流程觸達？ | |

---

## CTO（架構與技術債）

| # | 檢查項 | Y/N/NA |
|---|--------|--------|
| 1 | 所有 public 表 RLS 啟用且政策已審計（見 rls-policies-audit.md）？ | |
| 2 | API 錯誤統一為 AppError/4xx/5xx，且不洩漏 Postgres 內部錯誤？ | |
| 3 | 型別由 DB 生成並匯入，api-bodies 與前端對齊？ | |
| 4 | 使用 Supabase 的 API 與表已列於文件（SB-17）？ | |
| 5 | 關鍵路徑無 N+1 查詢，常用查詢欄位有索引？ | |
| 6 | 遷移命名與時序可追溯（supabase/migrations）？ | |
| 7 | getCurrentUser 或等效有單次/短期快取，避免重複請求？ | |
| 8 | 連線逾時與重試策略在 Supabase 與 Groq 端一致？ | |

---

## Security

| # | 檢查項 | Y/N/NA |
|---|--------|--------|
| 1 | ai_feedback 表 INSERT 非 always true（例如限 anon/authenticated + 應用層限流）？ | |
| 2 | profiles 僅本人或 service role 可 select/update？ | |
| 3 | subscription_audit、webhook_events 僅 service role 寫入？ | |
| 4 | 敏感欄位（如 token、密碼）不寫入一般 log？ | |
| 5 | 輸入校驗：關鍵 API 使用 Zod 或等效，scriptId 等有 stripHtml？ | |
| 6 | CSP（或 Report-Only）已設定且無明顯誤擋？ | |
| 7 | Turnstile 或等效在登入/忘記密碼流程啟用？ | |

---

## UX

| # | 檢查項 | Y/N/NA |
|---|--------|--------|
| 1 | 錯誤與 toast 使用 i18n key，文案一致？ | |
| 2 | 主要按鈕樣式統一（primary/outline/ghost）？ | |
| 3 | 列表與內容區有 loading 骨架或明確載入態？ | |
| 4 | 關鍵表單有 aria-label 或 aria-describedby，錯誤與欄位關聯？ | |
| 5 | 焦點管理：Modal/Drawer 打開時焦點陷阱、關閉回原焦點？ | |
| 6 | 派對房／劇本殺空狀態有引導文案或 CTA？ | |
| 7 | 可互動元素觸控目標至少 44px、鍵盤可達？ | |

---

## DevOps

| # | 檢查項 | Y/N/NA |
|---|--------|--------|
| 1 | CI：lint、unit、build 在 PR 必過？ | |
| 2 | E2E critical-paths 可跑且失敗有明確原因（非環境偶發）？ | |
| 3 | 健康檢查或 debug 端點可反映 Groq/Supabase 可用性？ | |
| 4 | .env.example 與 validate-env 涵蓋必要變數並有註解？ | |
| 5 | 遷移與還原策略有簡短文件（誰執行、何時、回滾步驟）？ | |

---

## QA

| # | 檢查項 | Y/N/NA |
|---|--------|--------|
| 1 | 登入→遊戲→訂閱路徑有自動化（E2E 或 API）覆蓋？ | |
| 2 | 付費牆與升級連結在關鍵頁面可點且導向正確？ | |
| 3 | 429/timeout 情境有手動或自動測試，回傳為 503 或友善文案？ | |
| 4 | 多語系：至少中英切換在主要頁面可驗證？ | |
| 5 | 劇本殺／派對房建立→加入→進行→結束流程可完整走通？ | |

---

## Product

| # | 檢查項 | Y/N/NA |
|---|--------|--------|
| 1 | 靈魂酒測、派對房、劇本殺、派對 DJ、訂閱、侍酒師主流程無阻斷？ | |
| 2 | 新用戶可於 1～2 分鐘內完成一項核心動作（如玩一局、進一房）？ | |
| 3 | 付費價值主張在定價頁與遊戲內一致（如 Pro 權益清單）？ | |

---

## Legal / 合規

| # | 檢查項 | Y/N/NA |
|---|--------|--------|
| 1 | 隱私政策含 Cookie、第三方服務、資料收集、用戶權利？ | |
| 2 | 服務條款含使用規範、終止、免責？ | |
| 3 | 酒類相關頁面有年齡或地區限制提醒（若適用）？ | |
| 4 | 資料保留與刪除有營運說明或內部 SOP？ | |

---

*填寫後可將本檔複製為 `EXPERT_CHECKLIST_YYYY-MM-DD.md` 存檔，以便比對歷次發布狀態。*

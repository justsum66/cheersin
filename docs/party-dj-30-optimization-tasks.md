# AI 派對 DJ — 30 項額外優化任務（排除 killer 10 項）

killer-features 中 AI 派對 DJ #21–30 已全勾，本清單為**未實作**的額外優化；實作後打勾。

| # | 任務 | 狀態 |
|---|------|------|
| 1 | 付費牆與時長限制前端提示（R2-201）：免費用戶選擇 >30 分鐘時即時提示升級 | 待辦 |
| 2 | 錯誤狀態與重試：API 失敗時顯示重試按鈕，最多重試 2 次 | 已完成 |
| 3 | Loading 骨架：表單送出後顯示 skeleton 取代空白，直到編排結果回傳 | 已完成 |
| 4 | transitionText LLM 開關：表單增加「AI 生成過渡語」checkbox，傳 useAiTransition | 已完成 |
| 5 | 分享連結：編排完成後一鍵複製「派對方案連結」（含參數或短碼） | 待辦 |
| 6 | 分享圖片：將編排結果生成 OG 圖或 canvas 圖供下載/分享 | 待辦 |
| 7 | 無障礙：表單與結果區 aria-label、鍵盤可操作、focus 順序 | 已完成 |
| 8 | RWD：360px 下表單不破版、按鈕 min 44px、結果區可橫向捲動 | 待辦 |
| 9 | 多語系：partyDj.* 已做則標記；補齊 en/ja/ko 若缺鍵 | 已有 |
| 10 | Analytics 事件：送出編排、分享、開始派對 各送 analytics | 已完成（送出成功 + 分享） |
| 11 | API 快取：同參數 5 分鐘內不重打 plan API，前端 memory 快取 | 待辦 |
| 12 | 編排結果「儲存為我的方案」：登入用戶可存到 profile（需 API） | 待辦 |
| 13 | 歷史方案列表：顯示最近 3 次編排結果，可一鍵再使用 | 待辦 |
| 14 | 氣氛偏好：表單增加「輕鬆 / 刺激 / 混合」選項，傳給 API 影響 gameIds | 待辦 |
| 15 | 階段可拖曳排序：結果頁可調整 phase 順序後再「開始派對」 | 待辦 |
| 16 | 每階段顯示預估遊戲名稱（非僅 ID）：呼叫 games config 顯示中文名 | 待辦 |
| 17 | 離線提示：無網路時表單禁用並顯示「請連線後再試」 | 待辦 |
| 18 | 逾時處理：plan API 超過 15s 顯示「生成中…」與取消按鈕 | 待辦 |
| 19 | 空狀態：從未生成過編排時顯示引導文案與 CTA | 待辦 |
| 20 | 印列樣式：編排結果區 print 時隱藏按鈕、保留方案文字 | 待辦 |
| 21 | Edge 遷移（R2-306）：plan API 遷至 Supabase Edge Function（可選） | 待辦 |
| 22 | 深色模式：確保 party-dj 頁在深色主題下對比與可讀性 | 待辦 |
| 23 | 進度條：長時間生成時顯示進度（若 API 支援 streaming 則改為串流） | 待辦 |
| 24 | 遊戲卡片預覽：結果區每階段可展開看該 phase 的遊戲簡介 | 待辦 |
| 25 | 複製單階段：每階段旁「複製此階段」僅複製該階段文字 | 待辦 |
| 26 | 語系切換後表單與結果不閃爍：key 穩定或 useMemo 文案 | 待辦 |
| 27 | 焦點管理：結果出現後 focus 移到「開始派對」或第一個連結 | 待辦 |
| 28 | 錯誤邊界：party-dj 頁外層 ErrorBoundary，避免整頁白屏 | 待辦 |
| 29 | 效能：表單與結果區 React.memo / 避免不必要的重渲染 | 待辦 |
| 30 | E2E：critical-paths 增加「派對 DJ 表單送出並看到結果」 | 待辦 |

**說明**：killer #21–30（入口、API、表單、30 分鐘限制、transitionText、分享、助理導流）已實作，本表為額外 30 項；實作時僅勾選「已完成」項。

-- SM-C01~C09：劇本 3「午夜酒莊」— 恐怖懸疑風格，7 章 6 角色，30 min
INSERT INTO public.scripts (id, title, slug, duration_min, min_players, max_players, is_18_plus)
VALUES (
  'a0e00003-0003-4000-8000-000000000003'::uuid,
  '午夜酒莊',
  'midnight-winery-03',
  30,
  4,
  8,
  false
)
ON CONFLICT (slug) DO NOTHING;

-- 7 章完整劇情
INSERT INTO public.script_chapters (id, script_id, chapter_index, title, content)
VALUES
  -- 第 1 章：酒莊大門（SM-C02）
  (gen_random_uuid(), 'a0e00003-0003-4000-8000-000000000003'::uuid, 0, '酒莊大門',
   '[{"type":"narrative","text":"暴風雨夜，你們受邀參加酒莊主人的私人品酒會。推開厚重的橡木大門，昏暗的燈光映照出牆上一排排珍貴藏酒。莊主卻遲遲未現身……","highlights":["暴風雨","莊主","未現身"]},{"type":"narrative","text":"管家面色凝重地走來：「各位貴賓，莊主今晚似乎有些……不對勁。請先入座，品嚐今晚的特選佳釀。」","isNpc":true}]'),

  -- 第 2 章：酒窖失竊（SM-C03）
  (gen_random_uuid(), 'a0e00003-0003-4000-8000-000000000003'::uuid, 1, '酒窖失竊',
   '[{"type":"narrative","text":"一聲尖叫劃破寧靜！管家慌張地跑來：「不得了！酒窖裡的鎮莊之寶——1945 年份的波爾多紅酒消失了！」","highlights":["1945 年份","波爾多紅酒","消失"],"isNpc":true},{"type":"narrative","text":"你們走進酒窖，發現地上有泥濘的腳印，展示架上的鎖被撬開，角落還遺落了一塊深紅色布料碎片。"},{"type":"punishment","rule":"所有人先乾一杯壯膽！","detail":"每人喝一口"}]'),

  -- 第 3 章：審問環節（SM-C04）
  (gen_random_uuid(), 'a0e00003-0003-4000-8000-000000000003'::uuid, 2, '審問環節',
   '[{"type":"narrative","text":"大家回到大廳。每個人必須交代今晚抵達後的行蹤。有人說一直在品酒室，有人說去了花園散步，有人說在圖書室看書……但真相只有一個。"},{"type":"vote","prompt":"聽完所有人的陳述，你覺得誰的說法最可疑？","options":["莊主","侍酒師","記者","偵探","庸客","神秘女子"],"resultAction":"得票最多者必須再詳細解釋","timerSeconds":60}]'),

  -- 第 4 章：線索發現（SM-C05）
  (gen_random_uuid(), 'a0e00003-0003-4000-8000-000000000003'::uuid, 3, '線索發現',
   '[{"type":"narrative","text":"在廚房後門，你們發現了一只沾有紅酒漬的手套，以及一張寫著神秘數字的紙條：「07-23-1945」。","highlights":["紅酒漬手套","07-23-1945"]},{"type":"narrative","text":"偵探注意到手套的尺寸偏小——這排除了某些嫌疑人。"},{"type":"punishment","rule":"被第一輪投票指名的人接受懲罰！","detail":"喝兩口，並回答其他人一個問題","diceRange":[1,3]}]'),

  -- 第 5 章：密室搜索（SM-C06）
  (gen_random_uuid(), 'a0e00003-0003-4000-8000-000000000003'::uuid, 4, '密室搜索',
   '[{"type":"narrative","text":"管家提議搜索每個人的房間。「如果各位清白，應該不會介意吧？」他的語氣耐人尋味。","isNpc":true},{"type":"vote","prompt":"你們決定先搜索誰的房間？","options":["莊主的書房","侍酒師的儲藏室","記者的客房","偵探的套房","庸客的角落","神秘女子的閣樓"],"resultAction":"被搜索者若藏有可疑物品需喝酒"},{"type":"timer","prompt":"在 45 秒內討論並決定搜索順序！","seconds":45,"timeoutPunishment":"超時！全員各喝一口"}]'),

  -- 第 6 章：真相揭露（SM-C07）
  (gen_random_uuid(), 'a0e00003-0003-4000-8000-000000000003'::uuid, 5, '真相揭露',
   '[{"type":"narrative","text":"搜索結果令人震驚——在某個房間裡找到了那瓶消失的波爾多！但真正的問題是：是誰放到那裡的？是房間的主人，還是有人嫁禍？","highlights":["波爾多","嫁禍"]},{"type":"narrative","text":"管家突然說：「我想起了一件事……今晚我看見有人在走廊上鬼鬼祟祟，手裡拿著一把備用鑰匙。」","isNpc":true},{"type":"choice","prompt":"你認為管家說的鬼祟之人是誰？","choices":[{"label":"莊主本人——自導自演","consequence":"如果猜對，莊主喝三口"},{"label":"侍酒師——監守自盜","consequence":"如果猜對，侍酒師喝三口"},{"label":"神秘女子——來者不善","consequence":"如果猜對，女子喝三口"},{"label":"管家自己——賊喊捉賊","consequence":"如果猜對，管家代表（房主）喝三口"}]}]'),

  -- 第 7 章：最終審判（SM-C08）
  (gen_random_uuid(), 'a0e00003-0003-4000-8000-000000000003'::uuid, 6, '最終審判',
   '[{"type":"narrative","text":"所有線索攤在桌上：泥濘腳印、紅酒漬手套、神秘數字紙條、備用鑰匙。真相即將大白。"},{"type":"vote","prompt":"最終投票：誰是偷走波爾多紅酒的兇手？","options":["莊主","侍酒師","記者","偵探","庸客","神秘女子"],"resultAction":"真相揭曉！","timerSeconds":90},{"type":"punishment","rule":"猜錯的人全部罰酒！猜對可以指定一人乾杯！","detail":"猜錯者各喝兩口，猜對者指定一人喝三口","diceRange":[2,4]},{"type":"narrative","text":"🎭 恭喜完成「午夜酒莊」！不論真相如何，今晚的酒都特別好喝。乾杯！🍷"}]');

-- SM-C09：6 個角色
INSERT INTO public.script_roles (id, script_id, role_name, role_description, secret_clue)
VALUES
  (gen_random_uuid(), 'a0e00003-0003-4000-8000-000000000003'::uuid,
   '莊主', '這座酒莊的主人，品味高雅但最近財務困難', '你的保險剛好涵蓋失竊品。但你真的偷了嗎？'),
  (gen_random_uuid(), 'a0e00003-0003-4000-8000-000000000003'::uuid,
   '侍酒師', '在酒莊工作多年，對每瓶酒瞭若指掌', '你知道酒窖暗門的位置，但今晚你有別的計畫。'),
  (gen_random_uuid(), 'a0e00003-0003-4000-8000-000000000003'::uuid,
   '記者', '受邀來撰寫酒莊專題，總是在觀察每個人', '你在走廊上拍到了一張模糊的照片——有人在搬東西。'),
  (gen_random_uuid(), 'a0e00003-0003-4000-8000-000000000003'::uuid,
   '偵探', '莊主的老朋友，擅長分析邏輯', '你注意到手套上有一種特殊的香水味。'),
  (gen_random_uuid(), 'a0e00003-0003-4000-8000-000000000003'::uuid,
   '庸客', '普通的品酒愛好者，看起來最沒嫌疑', '你其實對莊主懷恨在心——他曾在拍賣會上搶走你的心頭好。'),
  (gen_random_uuid(), 'a0e00003-0003-4000-8000-000000000003'::uuid,
   '神秘女子', '沒人認識她，卻收到了邀請函', '你的邀請函是偽造的。你來這裡有自己的目的。');
